function adjust_marquees(){jQuery(".marquee").each(function(){adjust_marquee(jQuery(this))})}function adjust_marquee(e){var t=e,a=t.closest(".se_albumplayer"),n=a.find(".trackInfo"),i=t.find(".sections .section:first").html();t.find(".sections").remove(),t.html(i),t.outerWidth(!0)+50>a.innerWidth()&&(n.show(),t.simplemarquee({speed:1e4,direction:"rtl",pause:!1}))}jQuery(document).ready(function(e){e(".se_albumplayer").each(function(){function t(t){g?g.attr("src",t):g=e("<iframe>",{id:"idown",src:t}).hide().appendTo("body")}function a(e,t){u.removeClass("current"),u=e,u.addClass("current");var a=p.paused;c.attr("src",e.attr("data-track_src")),f.html(e.find(".track_title").html()),adjust_marquee(s.find(".marquee")),p.load(),(!a||t)&&p.play()}function n(){var e=p.duration,t=p.currentTime,n=100*(t/e);v.css({width:n+"%"});var i=parseInt(t/60),r=parseInt(t-60*i),s=parseInt(e/60),o=parseInt(e-60*s);if(10>r&&(r="0"+r),10>o&&(o="0"+o),isNaN(e)?h.html(i+":"+r+"/"+"0:00"):h.html(i+":"+r+"/"+s+":"+o),p.ended){var c=u.next(".track");c.length?a(c,!0):(m.removeClass("icon-pause"),m.addClass("icon-play"))}}function i(){if(void 0==p.buffered||0==p.buffered.length||p.paused)0==p.buffered.length&&(k.css({width:"0%"}),b.css({width:"0%"}));else{var e=100*(p.buffered.end(0)/p.duration);k.css({width:e+"%"}),b.css({width:e+"%"})}}function r(e){p.currentTime=e}var s=e(this),o=s.find(".controls").attr("id").replace("controls-",""),c=s.find("audio"),l=s.find(".playlistWrap");s.find(".tracks");var d=s.find(".tracks .track:first"),u=d,f=s.find(".trackInfo");s.find(".cover"),c.attr("src",d.attr("data-track_src")),f.html(d.find(".track_title").html()),d.addClass("current");var p=c.get(0),m=s.find(".playPauseBtn");s.find(".progressBar");var g,f=s.find(".trackInfo"),h=s.find(".timeCode"),y=s.find(".progress"),v=s.find(".progress .bar.playBar"),k=s.find(".progress .bar.loadBar"),b=s.find(".progress .bar.seekBar"),_=s.find(".playlistBtn.icon-list"),w=s.find(".seekBtn.icon-fast-forward"),C=s.find(".seekBtn.icon-fast-backward"),q=s.find("td.volume .volumeBtn"),j=s.find(".progress.volume"),F=s.find(".progress.volume .bar.volumeBar"),B=document.createElement("audio");B.canPlayType&&"no"!=B.canPlayType("audio/mpeg")&&""!=B.canPlayType("audio/mpeg")?(_.click(function(){l.slideToggle()}),l.find(".track .track_title, .track .track_order").click(function(){a(e(this).parent()),p.play(),m.addClass("icon-pause"),m.removeClass("icon-play"),l.delay(500).slideToggle()}),l.find(".track td.downloadBtn").click(function(){t("/wp-content/plugins/se-html5-album-audio-player/download_audio.php?file="+e(this).parent().attr("data-track_src").replace(/https?:\/\/[^\/]+/i,""))}),w.click(function(){var e=u.next(".track");e.length&&a(e)}),C.click(function(){var e=u.prev(".track");e.length&&a(e)}),q.click(function(){j.toggle()}),j.click(function(t){e(this).offset(),e(this).css("margin-top").replace("px","");var a=e(this).position().top+j.outerHeight(!0);a=Math.abs(t.pageY-a),a>100&&(a=100),5>=a?(a=0,q.removeClass("icon-volume-up"),q.addClass("icon-volume-off")):(q.removeClass("icon-volume-off"),q.addClass("icon-volume-up")),F.css({height:a+"%"}),p.volume=a/100}),s.innerWidth()/220,""==f.html()?f.hide():f.outerWidth(!0)+50>s.innerWidth()&&e(".marquee").simplemarquee({speed:5e3,direction:"rtl",pause:!1}),v.progressbar({use_percentage:!1,display_text:2}),k.progressbar({use_percentage:!1}),m.click(function(){p.paused?p.play():p.pause(),m.toggleClass("icon-pause"),m.toggleClass("icon-play")}),c.bind("timeupdate",n),c.bind("progress",function(){i()}),c.bind("ended",function(){}),c.bind("loadeddata",function(){i()}),c.bind("loadstart",function(){i()}),c.bind("canplaythrough",function(){i(),n()}),c.bind("playing",function(){i()}),b.click(function(t){var a=e(this).offset(),n=(t.clientX-a.left)/y.outerWidth(),i=n*p.duration;r(i)})):e.getScript("/wp-content/plugins/se-html5-album-audio-player/js/niftyplayer/niftyplayer.js",function(){function a(e){u.removeClass("current"),u=e,u.addClass("current");var t=niftyplayer(i).getState();f.html(e.find(".track_title").html()),adjust_marquee(s.find(".marquee")),s.find(".marquee .sections").css("margin-top","-1em"),"paused"!=t&&"empty"!=t?(niftyplayer(i).stop(),niftyplayer(i).loadAndPlay(e.attr("data-track_src"))):(niftyplayer(i).stop(),niftyplayer(i).load(e.attr("data-track_src")))}function n(e){g>0&&clearInterval(g),g=setInterval(function(){var t=niftyplayer(e).getState();if(console.log(t),"finished"==t){var n=u.next(".track");n.length&&a(n)}},1600)}var i="niftyPlayer-"+o,r=c.attr("src"),d='<div class="flashTrack" style="position:absolute"><object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0" width="0" height="0" id="'+i+'" align=""><param name=movie value="niftyplayer.swf?file=betty.mp3&as=0"><param name=quality value=high><param name=bgcolor value=#FFFFFF><embed src="/wp-content/plugins/se-html5-album-audio-player/js/niftyplayer/niftyplayer.swf?file='+r+'&as=0" quality=high bgcolor=#FFFFFF width="0" height="0" name="'+i+'" align="" type="application/x-shockwave-flash" swLiveConnect="true" pluginspage="http://www.macromedia.com/go/getflashplayer"></embed></object></div>';s.find(".controls").append(d),s.find("td.bars").remove(),s.find("td.volume").remove();var p='<td class="niftyeq"><div class="display"></div></td>';s.find("td.time").replaceWith(p),m.click(function(){n(i),niftyplayer(i).playToggle(),s.find("td.niftyeq .display").toggleClass("pound"),m.toggleClass("icon-pause"),m.toggleClass("icon-play")}),_.click(function(){l.slideToggle()}),l.find(".track .track_title, .track .track_order").click(function(){a(e(this).parent()),l.delay(500).slideToggle()}),l.find(".track td.downloadBtn").click(function(){t("/wp-content/plugins/se-html5-album-audio-player/download_audio.php?file="+e(this).parent().attr("data-track_src").replace(/https?:\/\/[^\/]+/i,""))}),w.click(function(){var e=u.next(".track");e.length&&a(e)}),C.click(function(){var e=u.prev(".track");e.length&&a(e)});var g=0})})}),jQuery(window).smartresize(function(){adjust_marquees()}),jQuery.fn.animateHighlight=function(e,t){var a=e||"#FFFF9C",n=t||1500,i=this.css("backgroundColor");this.stop().css("background-color",a).animate({backgroundColor:i},n)};